pipeline {
    agent{
        label "macos"
    }

    environment {
    	PATH = "/Applications/Docker.app/Contents/Resources/bin:${env.PATH}"
    }

    stages {
        stage("info") {
			steps {
			    sh 'docker -v'
			}
		}

        stage("Build Docker") {
            steps {
                sh '''
                    docker compose up
                '''
            }
        }
    }
    post{
        success{
    	    mailTo(to: 'rudi.welter@gmail.com', attachLog: false)
        }
        failure{
    	    mailTo(to: 'rudi.welter@gmail.com', attachLog: true)
        }
    }
}